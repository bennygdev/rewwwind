{% extends "dashboard/base.html" %}
{% set active_page = "manage_products" %}
{% block styles %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/pageInteractions/filters.css') }}">
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/dashboard/manageProducts/productListing.css') }}">
{% endblock %}
{% block title %}Manage Products{% endblock %}


{% block content %}
<div class="header">
    <div class="header__left">
        <h2>Manage Products</h2>
        <div class="filters">
            <div class="filter-container">
                <label>Type</label>
                <div class="filter">
                    <span class="selected">All</span>&nbsp;&nbsp;<i class="bi bi-chevron-down"></i>
                    <ul class="filter--options">
                        <li class="highlighted">All</li>
                        <li>short</li>
                        <li>mediuuum</li>
                        <li>looooooooong</li>
                    </ul>
                </div>
            </div>
            <div class="filter-container">
                <label>Type</label>
                <div class="filter">
                    <span class="selected">All</span>&nbsp;&nbsp;<i class="bi bi-chevron-down"></i>
                    <ul class="filter--options">
                        <li class="highlighted">All</li>
                        <li>short</li>
                        <li>mediuuum</li>
                        <li>looooooooong</li>
                    </ul>
                </div>
            </div>
            <div class="filter-container">
                <label>Type</label>
                <div class="filter">
                    <span class="selected">All</span>&nbsp;&nbsp;<i class="bi bi-chevron-down"></i>
                    <ul class="filter--options">
                        <li class="highlighted">All</li>
                        <li>short</li>
                        <li>mediuuum</li>
                        <li>looooooooong</li>
                    </ul>
                </div>
            </div>
            <div class="filter-container">
                <label>Type</label>
                <div class="filter">
                    <span class="selected">All</span>&nbsp;&nbsp;<i class="bi bi-chevron-down"></i>
                    <ul class="filter--options">
                        <li class="highlighted">All</li>
                        <li>short</li>
                        <li>mediuuum</li>
                        <li>looooooooong</li>
                    </ul>
                </div>
            </div>
            <div class="filter-container">
                <label>Type</label>
                <div class="filter">
                    <span class="selected">All</span>&nbsp;&nbsp;<i class="bi bi-chevron-down"></i>
                    <ul class="filter--options">
                        <li class="highlighted">All</li>
                        <li>short</li>
                        <li>mediuuum</li>
                        <li>looooooooong</li>
                    </ul>
                </div>
            </div>
            <div class="filter-container">
                <label>Type</label>
                <div class="filter">
                    <span class="selected">All</span>&nbsp;&nbsp;<i class="bi bi-chevron-down"></i>
                    <ul class="filter--options">
                        <li class="highlighted">All</li>
                        <li>short</li>
                        <li>mediuuum</li>
                        <li>looooooooong</li>
                    </ul>
                </div>
            </div>
          </div>
    </div>
    <div class="header__right">
        <div><h5><i class="bi bi-gift-fill"></i>{{ products|length }} Total Products</h5></div>
        <a href='/dashboard/manage-products/add-product'><h3><i class="fa-solid fa-plus"></i>Add Product</h3></a>
    </div>
</div>
<div class="nav__search-container">
    <input type="text" id="nav__search-bar" class="nav__search-bar" placeholder="Search..." autocomplete="off">
    <i class="fa-solid fa-magnifying-glass nav__search-button" id="nav__search-button"></i>
    <div id="nav__search--suggestions" class="nav__search--suggestions"></div>
  </div>
<div class="products">
    <table>
        <thead>
            <tr>
                <th class="productName">Name</th>
                <th class="productType">Type</th>
                <th class="productGenre">Genre</th>
                <th class="productVariants">Variants</th>
                <th class="productAvgPrice">AvgPrice</th>
                <th class="productStock"></th>
                <th class="controls">Controls</th>
            </tr>
        </thead>
        {% for product in products %}
        <tr>
            <td class="productName">
                <div class="thumbnail"><img src="{{ url_for('static', filename=product.image_thumbnail) }}" alt="{{ product.name }}"/></div>
                <div class="name"><p>{{ product.name }}</p><p>ID: {{ product.id }}</p></div>
            </td>
            <td class="productType">{{ product.category.category_name }}</td>
            <td class="productGenre">{{ product.category.category_name }}</td>
            <td class="productVariants">{{ product.variants|length }}</td>
            <td class="productAvgPrice">&dollar;{{ '{:.2f}'.format(product.variants[0].price) }}</td>
            {% if product.variants[0].stock == 0 %}
                {% set stock_class = 'noStock' %}
                {% set stock_text = 'Out of stock' %}
            {% elif product.variants[0].stock < 10 %}
                {% set stock_class = 'lowStock' %}
                {% set stock_text = 'Low on stock' %}
            {% else %}
                {% set stock_class = 'highStock' %}
                {% set stock_text = 'High stock' %}
            {% endif %}
            <td class="productStock {{ stock_class }}">
                <div>{{ stock_text }}</div>
            </td>
            <td class="controls"><i class="bi bi-pencil-square"></i><i class="bi bi-eye-fill"></i><i class="bi bi-trash-fill"></i></td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}

{% block body_scripts %}
<script type="text/javascript" src="{{ url_for('static', filename='js/pageInteractions/filters.js') }}"></script>
{% endblock %}